<link rel="import" href="../bower_components/polymer/polymer.html" />
<link rel="import" href="../bower_components/app-route/app-location.html" />
<link rel="import" href="../bower_components/app-route/app-route.html" />
<link rel="import" href="../bower_components/iron-pages/iron-pages.html" />
<link rel="import" href="../bower_components/paper-styles/color.html" />
<link rel="import" href="../bower_components/paper-styles/typography.html" />
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html" />
<link rel="import" href="../bower_components/paper-tabs/paper-tabs.html" />

<link rel="import" href="my-icons.html" />

<dom-module id="my-app">
  <template>
    <style>
      :host {
        --app-primary-color: var(--paper-blue-500);
        --app-secondary-color: var(--paper-orange-a200);
        --app-primary-text-color: var(--paper-grey-900); /* hsl(240, 5%, 28%); */
        --app-secondary-text-color: var(--secondary-text-color);
        --app-light-text-color: var(--paper-grey-50);
        --app-primary-background-color: var(--light-theme-background-color);
        --app-secondary-background-color: var(--paper-grey-200);
      }

      :host {
        direction: rtl;
        padding: 0 10em;
        background-color: var(--app-primary-color);
        background-image: url('../images/background.jpg');
        background-position: center center;
        background-repeat: no-repeat;
        background-size: cover;

        color: var(--app-primary-text-color);

        @apply --layout-fit;
        position: fixed;
        @apply --paper-font-common-base;
        @apply --layout-vertical;
        @apply --layout-center-center;
      }

      .container {
        @apply --layout-horizontal;
      }

      .pic {
        background-color: var(--app-primary-color);
        background-image: url("/images/alirni.png");
        background-position: center center;
        background-repeat: no-repeat;
        /*background-size: cover;*/
        width: 20em;
        /*height: 20em;*/
        margin-left: .2em;
      }

      .page {
        @apply --layout-flex;
      }

      paper-tabs {
        --paper-tabs: {
          background-color: var(--app-secondary-background-color);
         };
         --paper-tabs-selection-bar-color: var(--app-primary-color);
      }

      paper-tab {
        text-align: center;
        --paper-tab-ink: var(--app-primary-color);
      }

      paper-tab a {
        display: block;
        text-decoration: none;
        color: var(--app-primary-text-color);
        @apply --paper-font-menu;
        line-height: 3.8em;
      }

      a:focus {
        outline: none;
      }
    </style>

    <app-location route="{{route}}"></app-location>
    <app-route
        route="{{route}}"
        pattern="/:page"
        data="{{routeData}}"
        tail="{{subroute}}"></app-route>

    <div class="container">

      <div class="pic"></div>
      <div class="page">

        <paper-tabs selected="0">
          <paper-tab>
            <a name="about" href="/about">
              درباره من
            </a>
          </paper-tab>
          <paper-tab>
            <a name="portfolio" href="/portfolio">
              پروژه ها
            </a>
          </paper-tab>
          <paper-tab>
            <a name="blog" href="/blog">
              بلاگ
            </a>
          </paper-tab>
          <paper-tab>
            <a name="contact" href="/contact">
              تماس با من
            </a></a>
          </paper-tab>
        </paper-tabs>

        <iron-pages
            selected="[[page]]"
            attr-for-selected="name"
            fallback-selection="view404"
            role="main">
          <page-about name="about"></page-about>
          <page-portfolio name="portfolio"></page-portfolio>
          <page-contact name="contact"></page-contact>
          <my-view404 name="view404"></my-view404>
        </iron-pages>

      </div>

    </div>

  </template>

  <script>
    Polymer({
      is: 'my-app',

      properties: {
        page: {
          type: String,
          reflectToAttribute: true,
          observer: '_pageChanged',
        },
      },

      observers: [
        '_routePageChanged(routeData.page)',
      ],

      _routePageChanged: function(page) {
        this.page = page || 'about';

        // if (!this.$.drawer.persistent) {
        //   this.$.drawer.close();
        // }
      },

      _pageChanged: function(page) {
        // Load page import on demand. Show 404 page if fails
        var resolvedPageUrl = this.resolveUrl('page-' + page + '.html');
        this.importHref(resolvedPageUrl, null, this._showPage404, true);
      },

      _showPage404: function() {
        this.page = 'view404';
      },
    });
  </script>
</dom-module>
